{"version":3,"sources":["../src/index.ts","../src/config.ts","../src/github/client.ts","../src/jira/client.ts","../src/github/code-scanning.ts","../src/github/dependabot.ts","../src/github/secret-scanning.ts","../src/jira/tickets.ts","../src/sync/syncer.ts"],"sourcesContent":["import { Command } from 'commander';\nimport { loadConfig } from './config.js';\nimport { createGitHubClient } from './github/client.js';\nimport { createJiraClient } from './jira/client.js';\nimport { syncAlerts } from './sync/syncer.js';\n\n// Check if running as GitHub Action\nconst isGitHubAction = !!process.env.GITHUB_ACTIONS;\n\nasync function runSync(options: {\n  owner: string;\n  repo: string;\n  epic: string;\n  project: string;\n  dryRun: boolean;\n}) {\n  console.log('üîÑ Starting GHAS to Jira sync...\\n');\n\n  // Load and validate configuration\n  const config = loadConfig({\n    owner: options.owner,\n    repo: options.repo,\n    epic: options.epic,\n    project: options.project,\n    dryRun: options.dryRun,\n  });\n\n  // Create API clients\n  const githubClient = createGitHubClient(config.github.token);\n  const jiraClient = createJiraClient({\n    host: config.jira.host,\n    email: config.jira.email,\n    apiToken: config.jira.apiToken,\n  });\n\n  // Run sync\n  const result = await syncAlerts({\n    githubClient,\n    jiraClient,\n    owner: config.github.owner,\n    repo: config.github.repo,\n    projectKey: config.jira.project,\n    epicKey: config.jira.epic,\n    dryRun: config.dryRun,\n  });\n\n  // Exit with appropriate code\n  const exitCode = result.errors > 0 ? 1 : 0;\n  console.log('\\n‚úÖ Sync completed!');\n  process.exit(exitCode);\n}\n\nif (isGitHubAction) {\n  // GitHub Actions mode - read from inputs\n  const getInput = (name: string): string => {\n    return process.env[`INPUT_${name.toUpperCase().replace(/-/g, '_')}`] || '';\n  };\n\n  // Auto-detect owner/repo from GitHub context\n  const repository = process.env.GITHUB_REPOSITORY || '';\n  const [contextOwner, contextRepo] = repository.split('/');\n\n  const owner = getInput('owner') || contextOwner || '';\n  const repo = getInput('repo') || contextRepo || '';\n  const epic = getInput('jira-epic');\n  const project = getInput('jira-project');\n  const dryRun = getInput('dry-run') === 'true';\n\n  // Set Jira env vars if provided via inputs\n  if (getInput('jira-host')) {\n    process.env.JIRA_HOST = getInput('jira-host');\n  }\n  if (getInput('jira-email')) {\n    process.env.JIRA_EMAIL = getInput('jira-email');\n  }\n  if (getInput('jira-api-token')) {\n    process.env.JIRA_API_TOKEN = getInput('jira-api-token');\n  }\n  if (getInput('github-token')) {\n    process.env.GITHUB_TOKEN = getInput('github-token');\n  }\n\n  runSync({ owner, repo, epic, project, dryRun }).catch((error) => {\n    if (error instanceof Error) {\n      console.error('\\n‚ùå Error:', error.message);\n      if (error.stack) {\n        console.error('\\nStack trace:', error.stack);\n      }\n    } else {\n      console.error('\\n‚ùå Unknown error:', error);\n    }\n    process.exit(1);\n  });\n} else {\n  // CLI mode - use commander\n  const program = new Command();\n\n  program\n    .name('ghas-jira-sync')\n    .description('Sync GitHub Advanced Security alerts to Jira tickets')\n    .version('1.0.0')\n    .requiredOption('--owner <owner>', 'GitHub organization or user')\n    .requiredOption('--repo <repo>', 'GitHub repository name')\n    .requiredOption('--epic <epic>', 'Jira epic ticket ID (e.g., PROJ-123)')\n    .requiredOption('--project <project>', 'Jira project key (e.g., PROJ)')\n    .option('--dry-run', 'Preview without creating tickets', false)\n    .action(async (options) => {\n      try {\n        await runSync({\n          owner: options.owner,\n          repo: options.repo,\n          epic: options.epic,\n          project: options.project,\n          dryRun: options.dryRun,\n        });\n      } catch (error) {\n        if (error instanceof Error) {\n          console.error('\\n‚ùå Error:', error.message);\n          if (error.stack) {\n            console.error('\\nStack trace:', error.stack);\n          }\n        } else {\n          console.error('\\n‚ùå Unknown error:', error);\n        }\n        process.exit(1);\n      }\n    });\n\n  program.parse();\n}\n","import { z } from 'zod';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nexport const ConfigSchema = z.object({\n  github: z.object({\n    token: z.string().min(1, 'GitHub token is required'),\n    owner: z.string().min(1, 'GitHub owner is required'),\n    repo: z.string().min(1, 'GitHub repo is required'),\n  }),\n  jira: z.object({\n    host: z.string().url('Jira host must be a valid URL'),\n    email: z.string().email('Jira email must be valid'),\n    apiToken: z.string().min(1, 'Jira API token is required'),\n    project: z.string().min(1, 'Jira project key is required'),\n    epic: z.string().min(1, 'Jira epic ID is required'),\n  }),\n  dryRun: z.boolean().default(false),\n});\n\nexport type Config = z.infer<typeof ConfigSchema>;\n\nexport interface LoadConfigOptions {\n  owner: string;\n  repo: string;\n  epic: string;\n  project: string;\n  dryRun?: boolean;\n}\n\nexport function loadConfig(options: LoadConfigOptions): Config {\n  const config = {\n    github: {\n      token: process.env.GITHUB_TOKEN || '',\n      owner: options.owner,\n      repo: options.repo,\n    },\n    jira: {\n      host: process.env.JIRA_HOST || '',\n      email: process.env.JIRA_EMAIL || '',\n      apiToken: process.env.JIRA_API_TOKEN || '',\n      project: options.project,\n      epic: options.epic,\n    },\n    dryRun: options.dryRun || false,\n  };\n\n  return ConfigSchema.parse(config);\n}\n","import { Octokit } from '@octokit/rest';\n\nexport function createGitHubClient(token: string): Octokit {\n  return new Octokit({\n    auth: token,\n    userAgent: 'ghas-jira-sync/1.0.0',\n  });\n}\n","import { Version3Client } from 'jira.js';\n\nexport interface JiraConfig {\n  host: string;\n  email: string;\n  apiToken: string;\n}\n\nexport function createJiraClient(config: JiraConfig): Version3Client {\n  return new Version3Client({\n    host: config.host,\n    authentication: {\n      basic: {\n        email: config.email,\n        apiToken: config.apiToken,\n      },\n    },\n  });\n}\n","import { Octokit } from '@octokit/rest';\nimport { UnifiedAlert, AlertSeverity, AlertState } from './types.js';\n\nexport async function fetchCodeScanningAlerts(\n  octokit: Octokit,\n  owner: string,\n  repo: string\n): Promise<UnifiedAlert[]> {\n  try {\n    const { data } = await octokit.codeScanning.listAlertsForRepo({\n      owner,\n      repo,\n      state: 'open',\n      per_page: 100,\n    });\n\n    return data.map((alert) => ({\n      id: `code-scanning-${alert.number}`,\n      type: 'code-scanning' as const,\n      title: alert.rule.description || alert.rule.id || 'Unknown rule',\n      description: alert.rule.full_description || alert.rule.description || '',\n      severity: mapCodeScanningSeverity(alert.rule.severity),\n      state: mapCodeScanningState(alert.state || 'open'),\n      url: alert.html_url,\n      createdAt: alert.created_at,\n      location: alert.most_recent_instance?.location?.path,\n    }));\n  } catch (error) {\n    if (isAccessError(error)) {\n      console.warn('Code scanning not available or not enabled for this repository');\n      return [];\n    }\n    throw error;\n  }\n}\n\nfunction mapCodeScanningSeverity(severity: string | null | undefined): AlertSeverity {\n  const severityMap: Record<string, AlertSeverity> = {\n    critical: 'critical',\n    high: 'high',\n    medium: 'medium',\n    low: 'low',\n    warning: 'warning',\n    error: 'error',\n    note: 'note',\n  };\n\n  return severityMap[severity?.toLowerCase() || ''] || 'medium';\n}\n\nfunction mapCodeScanningState(state: string): AlertState {\n  if (state === 'open') return 'open';\n  if (state === 'fixed') return 'fixed';\n  return 'dismissed';\n}\n\nfunction isAccessError(error: unknown): boolean {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    'status' in error &&\n    (error.status === 404 || error.status === 403)\n  );\n}\n","import { Octokit } from '@octokit/rest';\nimport { UnifiedAlert, AlertSeverity, AlertState } from './types.js';\n\nexport async function fetchDependabotAlerts(\n  octokit: Octokit,\n  owner: string,\n  repo: string\n): Promise<UnifiedAlert[]> {\n  try {\n    const { data } = await octokit.dependabot.listAlertsForRepo({\n      owner,\n      repo,\n      state: 'open',\n      per_page: 100,\n    });\n\n    return data.map((alert) => {\n      // Extract CVE ID\n      const cveId = alert.security_advisory.cve_id || alert.security_advisory.ghsa_id || undefined;\n\n      // Extract affected versions\n      const affectedVersions = alert.security_vulnerability?.vulnerable_version_range || undefined;\n\n      // Extract fixed versions\n      const fixedVersions = alert.security_vulnerability?.first_patched_version?.identifier || undefined;\n\n      return {\n        id: `dependabot-${alert.number}`,\n        type: 'dependabot' as const,\n        title: `${alert.security_advisory.summary} in ${alert.dependency.package?.name || 'unknown package'}`,\n        description: alert.security_advisory.description,\n        severity: mapDependabotSeverity(alert.security_advisory.severity),\n        state: mapDependabotState(alert.state),\n        url: alert.html_url,\n        createdAt: alert.created_at,\n        location: alert.dependency.manifest_path,\n        cveId,\n        affectedVersions,\n        fixedVersions,\n      };\n    });\n  } catch (error) {\n    if (isAccessError(error)) {\n      console.warn('Dependabot alerts not available or not enabled for this repository');\n      return [];\n    }\n    throw error;\n  }\n}\n\nfunction mapDependabotSeverity(severity: string): AlertSeverity {\n  const severityMap: Record<string, AlertSeverity> = {\n    critical: 'critical',\n    high: 'high',\n    medium: 'medium',\n    low: 'low',\n  };\n\n  return severityMap[severity.toLowerCase()] || 'medium';\n}\n\nfunction mapDependabotState(state: string): AlertState {\n  if (state === 'open') return 'open';\n  if (state === 'fixed') return 'fixed';\n  return 'dismissed';\n}\n\nfunction isAccessError(error: unknown): boolean {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    'status' in error &&\n    (error.status === 404 || error.status === 403)\n  );\n}\n","import { Octokit } from '@octokit/rest';\nimport { UnifiedAlert, AlertSeverity, AlertState } from './types.js';\n\nexport async function fetchSecretScanningAlerts(\n  octokit: Octokit,\n  owner: string,\n  repo: string\n): Promise<UnifiedAlert[]> {\n  try {\n    const { data } = await octokit.secretScanning.listAlertsForRepo({\n      owner,\n      repo,\n      state: 'open',\n      per_page: 100,\n    });\n\n    return data.map((alert) => ({\n      id: `secret-scanning-${alert.number}`,\n      type: 'secret-scanning' as const,\n      title: `${alert.secret_type_display_name} exposed`,\n      description: `Secret type: ${alert.secret_type}`,\n      severity: 'critical' as AlertSeverity,\n      state: mapSecretScanningState(alert.state || 'open'),\n      url: alert.html_url || '',\n      createdAt: alert.created_at || new Date().toISOString(),\n      location: alert.locations_url,\n    }));\n  } catch (error) {\n    if (isAccessError(error)) {\n      console.warn('Secret scanning not available or not enabled for this repository');\n      console.warn('Note: Secret scanning requires GitHub Advanced Security for private repos');\n      console.warn('      and a token with \"security_events\" scope or \"secret_scanning_alerts\" permission');\n      return [];\n    }\n    throw error;\n  }\n}\n\nfunction mapSecretScanningState(state: string): AlertState {\n  if (state === 'open') return 'open';\n  if (state === 'resolved') return 'fixed';\n  return 'dismissed';\n}\n\nfunction isAccessError(error: unknown): boolean {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    'status' in error &&\n    (error.status === 404 || error.status === 403)\n  );\n}\n","import { Version3Client } from 'jira.js';\nimport { UnifiedAlert, AlertSeverity } from '../github/types.js';\nimport { CreateTicketPayload, JiraIssue } from './types.js';\n\nexport async function searchExistingTicket(\n  client: Version3Client,\n  projectKey: string,\n  alertUrl: string,\n  epicKey?: string\n): Promise<JiraIssue | null> {\n  const alertLabel = createAlertLabel(alertUrl);\n  console.log(`Searching for existing ticket with label: ${alertLabel}`);\n\n  // Try label-based JQL search first (scoped to project)\n  try {\n    const jql = `project = ${projectKey} AND labels = \"${alertLabel}\" ORDER BY created DESC`;\n\n    const response = await client.issueSearch.searchForIssuesUsingJqlEnhancedSearch({\n      jql,\n      maxResults: 1,\n      fields: ['summary', 'description', 'status', 'labels'],\n    });\n\n    if (response.issues && response.issues.length > 0) {\n      const issue = response.issues[0];\n      if (issue) {\n        return {\n          id: issue.id,\n          key: issue.key,\n          fields: {\n            summary: issue.fields.summary,\n            description: typeof issue.fields.description === 'string'\n              ? issue.fields.description\n              : '',\n            status: {\n              name: typeof issue.fields.status === 'object' && issue.fields.status !== null && 'name' in issue.fields.status\n                ? String(issue.fields.status.name)\n                : 'Unknown',\n            },\n          },\n        };\n      }\n    }\n  } catch (error) {\n    console.warn(`Label search failed for ${alertLabel}:`, error instanceof Error ? error.message : error);\n\n    // JQL search failed, try getting tickets from epic if provided\n    if (epicKey) {\n      try {\n        const epicJql = `project = ${projectKey} AND parent = ${epicKey} AND labels = \"${alertLabel}\" ORDER BY created DESC`;\n        const epicResponse = await client.issueSearch.searchForIssuesUsingJqlEnhancedSearch({\n          jql: epicJql,\n          maxResults: 1,\n          fields: ['summary', 'description', 'status', 'labels'],\n        });\n\n        if (epicResponse.issues && epicResponse.issues.length > 0) {\n          const issue = epicResponse.issues[0];\n          if (issue) {\n            return {\n              id: issue.id,\n              key: issue.key,\n              fields: {\n                summary: issue.fields.summary,\n                description: typeof issue.fields.description === 'string'\n                  ? issue.fields.description\n                  : '',\n                status: {\n                  name: typeof issue.fields.status === 'object' && issue.fields.status !== null && 'name' in issue.fields.status\n                    ? String(issue.fields.status.name)\n                    : 'Unknown',\n                },\n              },\n            };\n          }\n        }\n      } catch (epicError) {\n        console.warn(`Epic-based search also failed for ${alertLabel}:`, epicError instanceof Error ? epicError.message : epicError);\n      }\n    }\n  }\n\n  // Final fallback: search for the GitHub URL in ticket descriptions\n  // This catches cases where labels might not be working correctly\n  try {\n    console.log(`Trying fallback URL-based search for: ${alertUrl}`);\n    const urlSearchJql = `project = ${projectKey} AND text ~ \"${alertUrl.replace(/[:\"\\/]/g, ' ')}\" ORDER BY created DESC`;\n\n    const urlResponse = await client.issueSearch.searchForIssuesUsingJqlEnhancedSearch({\n      jql: urlSearchJql,\n      maxResults: 5,\n      fields: ['summary', 'description', 'status', 'labels'],\n    });\n\n    if (urlResponse.issues && urlResponse.issues.length > 0) {\n      // Verify the URL is actually in the description to avoid false positives\n      for (const issue of urlResponse.issues) {\n        const description = typeof issue.fields.description === 'object' && issue.fields.description !== null\n          ? JSON.stringify(issue.fields.description)\n          : String(issue.fields.description || '');\n\n        if (description.includes(alertUrl)) {\n          console.log(`Found existing ticket via URL search: ${issue.key}`);\n          return {\n            id: issue.id,\n            key: issue.key,\n            fields: {\n              summary: issue.fields.summary,\n              description: typeof issue.fields.description === 'string'\n                ? issue.fields.description\n                : '',\n              status: {\n                name: typeof issue.fields.status === 'object' && issue.fields.status !== null && 'name' in issue.fields.status\n                  ? String(issue.fields.status.name)\n                  : 'Unknown',\n              },\n            },\n          };\n        }\n      }\n    }\n  } catch (urlError) {\n    console.warn(`URL-based search failed:`, urlError instanceof Error ? urlError.message : urlError);\n  }\n\n  return null;\n}\n\nexport async function createTicket(\n  client: Version3Client,\n  projectKey: string,\n  epicKey: string,\n  alert: UnifiedAlert\n): Promise<string> {\n  const description = buildTicketDescriptionADF(alert);\n  const priority = mapSeverityToPriority(alert.severity);\n  const alertLabel = createAlertLabel(alert.url);\n\n  const labels = ['ghas', alert.type, `severity-${alert.severity}`, alertLabel];\n  console.log(`Creating ticket with labels: ${labels.join(', ')}`);\n\n  const payload: CreateTicketPayload = {\n    fields: {\n      project: {\n        key: projectKey,\n      },\n      summary: `[${alert.type.toUpperCase()}] ${alert.title}`,\n      description,\n      issuetype: {\n        name: 'Task',\n      },\n      priority: {\n        name: priority,\n      },\n      parent: {\n        key: epicKey,\n      },\n      labels,\n    },\n  };\n\n  try {\n    const response = await client.issues.createIssue(payload);\n    return response.key;\n  } catch (error: unknown) {\n    // Log detailed error information\n    if (\n      typeof error === 'object' &&\n      error !== null &&\n      'response' in error\n    ) {\n      const resp = error.response as { data?: { errors?: unknown; errorMessages?: unknown } };\n      console.error('Jira API Error Details:', JSON.stringify(resp.data, null, 2));\n    }\n    throw error;\n  }\n}\n\nfunction parseMarkdownToADF(markdown: string): unknown[] {\n  const nodes: unknown[] = [];\n  const lines = markdown.split('\\n');\n  let i = 0;\n\n  while (i < lines.length) {\n    const line = lines[i];\n\n    if (!line) {\n      i++;\n      continue;\n    }\n\n    // Handle headings (## or ###)\n    if (line.startsWith('### ')) {\n      nodes.push({\n        type: 'heading',\n        attrs: { level: 3 },\n        content: [{ type: 'text', text: line.substring(4).trim() }],\n      });\n      i++;\n      continue;\n    }\n\n    if (line.startsWith('## ')) {\n      nodes.push({\n        type: 'heading',\n        attrs: { level: 2 },\n        content: [{ type: 'text', text: line.substring(3).trim() }],\n      });\n      i++;\n      continue;\n    }\n\n    // Handle code blocks\n    if (line.startsWith('```')) {\n      const codeLines: string[] = [];\n      i++;\n      while (i < lines.length && !lines[i]?.startsWith('```')) {\n        codeLines.push(lines[i] || '');\n        i++;\n      }\n      if (codeLines.length > 0) {\n        nodes.push({\n          type: 'codeBlock',\n          content: [{ type: 'text', text: codeLines.join('\\n') }],\n        });\n      }\n      i++; // Skip closing ```\n      continue;\n    }\n\n    // Handle regular paragraphs with inline formatting\n    const paragraphContent = parseInlineFormatting(line);\n    if (paragraphContent.length > 0) {\n      nodes.push({\n        type: 'paragraph',\n        content: paragraphContent,\n      });\n    }\n    i++;\n  }\n\n  return nodes;\n}\n\nfunction parseInlineFormatting(text: string): unknown[] {\n  const content: unknown[] = [];\n  let currentPos = 0;\n\n  // Simple regex patterns for inline code and links\n  const patterns = [\n    { regex: /`([^`]+)`/g, type: 'code' },\n    { regex: /\\[([^\\]]+)\\]\\(([^)]+)\\)/g, type: 'link' },\n  ];\n\n  // For simplicity, handle inline code first\n  const codeMatches = [...text.matchAll(/`([^`]+)`/g)];\n\n  if (codeMatches.length === 0) {\n    // No special formatting, just return plain text\n    return [{ type: 'text', text }];\n  }\n\n  let lastIndex = 0;\n  for (const match of codeMatches) {\n    const matchIndex = match.index || 0;\n\n    // Add text before the code\n    if (matchIndex > lastIndex) {\n      const beforeText = text.substring(lastIndex, matchIndex);\n      if (beforeText) {\n        content.push({ type: 'text', text: beforeText });\n      }\n    }\n\n    // Add the code\n    content.push({\n      type: 'text',\n      text: match[1],\n      marks: [{ type: 'code' }],\n    });\n\n    lastIndex = matchIndex + match[0].length;\n  }\n\n  // Add remaining text\n  if (lastIndex < text.length) {\n    const remainingText = text.substring(lastIndex);\n    if (remainingText) {\n      content.push({ type: 'text', text: remainingText });\n    }\n  }\n\n  return content.length > 0 ? content : [{ type: 'text', text }];\n}\n\nfunction buildTicketDescriptionADF(alert: UnifiedAlert): unknown {\n  const content = [\n    {\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Alert Type: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.type },\n      ],\n    },\n    {\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Severity: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.severity.toUpperCase() },\n      ],\n    },\n    {\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'State: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.state },\n      ],\n    },\n    {\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Created: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: new Date(alert.createdAt).toLocaleString() },\n      ],\n    },\n    {\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Vulnerability Details', marks: [{ type: 'strong' }] },\n      ],\n    },\n  ];\n\n  // Add CVE ID if available\n  if (alert.cveId) {\n    content.push({\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'CVE ID: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.cveId },\n      ],\n    });\n  }\n\n  // Add affected versions if available\n  if (alert.affectedVersions) {\n    content.push({\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Affected Versions: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.affectedVersions },\n      ],\n    });\n  }\n\n  // Add fixed versions if available\n  if (alert.fixedVersions) {\n    content.push({\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Fixed in Version: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.fixedVersions },\n      ],\n    });\n  }\n\n  // Parse the description markdown and convert to ADF\n  const descriptionNodes = parseMarkdownToADF(alert.description);\n  content.push(...descriptionNodes);\n\n  if (alert.location) {\n    content.push({\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'Location: ', marks: [{ type: 'strong' }] },\n        { type: 'text', text: alert.location },\n      ],\n    });\n  }\n\n  content.push(\n    {\n      type: 'paragraph',\n      content: [\n        { type: 'text', text: 'GitHub Alert URL: ', marks: [{ type: 'strong' }] },\n      ],\n    },\n    {\n      type: 'paragraph',\n      content: [{ type: 'text', text: alert.url }],\n    },\n    {\n      type: 'rule',\n    },\n    {\n      type: 'paragraph',\n      content: [\n        {\n          type: 'text',\n          text: 'This ticket was automatically created by ghas-jira-sync',\n          marks: [{ type: 'em' }],\n        },\n      ],\n    }\n  );\n\n  return {\n    type: 'doc',\n    version: 1,\n    content,\n  };\n}\n\nfunction mapSeverityToPriority(severity: AlertSeverity): string {\n  const priorityMap: Record<AlertSeverity, string> = {\n    critical: 'Highest',\n    high: 'High',\n    error: 'High',\n    medium: 'Medium',\n    warning: 'Medium',\n    low: 'Low',\n    note: 'Lowest',\n  };\n\n  return priorityMap[severity] || 'Medium';\n}\n\nfunction createAlertLabel(alertUrl: string): string {\n  // Extract a unique identifier from the alert URL and create a valid Jira label\n  // Labels can't contain spaces or special chars except hyphens and underscores\n  const match = alertUrl.match(/\\/(dependabot|code-scanning|secret-scanning)\\/(\\d+)/);\n  if (match) {\n    const [, type, id] = match;\n    return `ghas-${type}-${id}`;\n  }\n  // Fallback: create a hash-like identifier from the URL\n  const hash = alertUrl.split('/').slice(-2).join('-').replace(/[^a-zA-Z0-9-]/g, '');\n  return `ghas-alert-${hash}`;\n}\n","import { Octokit } from '@octokit/rest';\nimport { Version3Client } from 'jira.js';\nimport { UnifiedAlert } from '../github/types.js';\nimport { fetchCodeScanningAlerts } from '../github/code-scanning.js';\nimport { fetchDependabotAlerts } from '../github/dependabot.js';\nimport { fetchSecretScanningAlerts } from '../github/secret-scanning.js';\nimport { searchExistingTicket, createTicket } from '../jira/tickets.js';\n\nexport interface SyncOptions {\n  githubClient: Octokit;\n  jiraClient: Version3Client;\n  owner: string;\n  repo: string;\n  projectKey: string;\n  epicKey: string;\n  dryRun: boolean;\n}\n\nexport interface SyncResult {\n  totalAlerts: number;\n  newTickets: number;\n  existingTickets: number;\n  skipped: number;\n  errors: number;\n}\n\nexport async function syncAlerts(options: SyncOptions): Promise<SyncResult> {\n  const {\n    githubClient,\n    jiraClient,\n    owner,\n    repo,\n    projectKey,\n    epicKey,\n    dryRun,\n  } = options;\n\n  console.log(`\\nFetching GHAS alerts for ${owner}/${repo}...`);\n\n  // Fetch all alert types in parallel\n  const [codeScanningAlerts, dependabotAlerts, secretScanningAlerts] =\n    await Promise.all([\n      fetchCodeScanningAlerts(githubClient, owner, repo),\n      fetchDependabotAlerts(githubClient, owner, repo),\n      fetchSecretScanningAlerts(githubClient, owner, repo),\n    ]);\n\n  const allAlerts: UnifiedAlert[] = [\n    ...codeScanningAlerts,\n    ...dependabotAlerts,\n    ...secretScanningAlerts,\n  ];\n\n  console.log(`Found ${allAlerts.length} total alerts:`);\n  console.log(`  - Code Scanning: ${codeScanningAlerts.length}`);\n  console.log(`  - Dependabot: ${dependabotAlerts.length}`);\n  console.log(`  - Secret Scanning: ${secretScanningAlerts.length}`);\n\n  const result: SyncResult = {\n    totalAlerts: allAlerts.length,\n    newTickets: 0,\n    existingTickets: 0,\n    skipped: 0,\n    errors: 0,\n  };\n\n  if (allAlerts.length === 0) {\n    console.log('\\nNo alerts to process.');\n    return result;\n  }\n\n  console.log(`\\n${dryRun ? '[DRY RUN] ' : ''}Processing alerts...`);\n\n  for (const alert of allAlerts) {\n    try {\n      // Check if ticket already exists\n      const existingTicket = await searchExistingTicket(\n        jiraClient,\n        projectKey,\n        alert.url,\n        epicKey\n      );\n\n      if (existingTicket) {\n        console.log(\n          `  ‚úì Ticket already exists for alert: ${alert.title} (${existingTicket.key})`\n        );\n        result.existingTickets++;\n        continue;\n      }\n\n      // Create new ticket\n      if (dryRun) {\n        console.log(\n          `  [DRY RUN] Would create ticket for: ${alert.title} [${alert.severity}]`\n        );\n        result.newTickets++;\n      } else {\n        try {\n          const ticketKey = await createTicket(\n            jiraClient,\n            projectKey,\n            epicKey,\n            alert\n          );\n          console.log(\n            `  ‚úì Created ticket ${ticketKey} for: ${alert.title} [${alert.severity}]`\n          );\n          result.newTickets++;\n        } catch (createError: unknown) {\n          // Log the full error to understand what's happening\n          console.error(\n            `  ‚úó Error creating ticket for \"${alert.title}\":`,\n            createError\n          );\n          result.errors++;\n        }\n      }\n    } catch (error) {\n      console.error(\n        `  ‚úó Error processing alert \"${alert.title}\":`,\n        error instanceof Error ? error.message : error\n      );\n      result.errors++;\n    }\n  }\n\n  console.log('\\n--- Sync Summary ---');\n  console.log(`Total alerts: ${result.totalAlerts}`);\n  console.log(`New tickets created: ${result.newTickets}`);\n  console.log(`Existing tickets found: ${result.existingTickets}`);\n  console.log(`Errors: ${result.errors}`);\n\n  return result;\n}\n"],"mappings":"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","names":["dotenv","isAccessError","isAccessError"]}